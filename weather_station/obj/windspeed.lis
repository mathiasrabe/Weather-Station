                        .module windspeed.c
                        .area text(rom, con, rel)
 0000                   .dbfile ./windspeed.c
 0000                   .dbfile C:\Users\MATHIA~1\DOCUME~1\PSOCDE~1.2PR\WEATHE~1\WEATHE~1\windspeed.c
 0000                   .dbfunc e windsensor _windsensor fV
 0000           ;     windSample -> X+0
 0000           ;     secondLine -> X-7
 0000           ;      firstLine -> X-5
 0000           _windsensor::
 0000                   .dbline -1
 0000 10                push X
 0001 4F                mov X,SP
 0002 3802              add SP,2
 0004                   .dbline 8
 0004           ; #define PORT PRT0DR
 0004           ; #define RAINPIN 0b00001000 // P0_3
 0004           ; 
 0004           ; #include "PSoCAPI.h"
 0004           ; #include <stdio.h>
 0004           ; #include <stdlib.h>
 0004           ; 
 0004           ; void windsensor(char *firstLine, char *secondLine) {
 0004                   .dbline 9
 0004           ;       int windSample = 0x00;
 0004 560100            mov [X+1],0
 0007 560000            mov [X+0],0
 000A                   .dbline 11
 000A           ; 
 000A           ;       windSample = SAR6_wind_cGetSample();
 000A 10                push X
 000B 7C0000            xcall _SAR6_wind_cGetSample
 000E 20                pop X
 000F 5401              mov [X+1],A
 0011 560000            mov [X+0],0
 0014 480180            tst [X+1],-128
 0017 A004              jz X0
 0019 5600FF            mov [X+0],-1
 001C           X0:
 001C                   .dbline 15
 001C           ;       //windSample += 31; // make unsigned int
 001C           ;       //windSample *= 37; // to get km/h
 001C           ;       
 001C           ;       csprintf(firstLine, "Windspeed & Dire");
 001C 5010              mov A,>L2
 001E 08                push A
 001F 5010              mov A,<L2
 0021 08                push A
 0022 52FB              mov A,[X-5]
 0024 08                push A
 0025 52FC              mov A,[X-4]
 0027 08                push A
 0028 7C0000            xcall _csprintf
 002B                   .dbline 16
 002B           ;       csprintf(secondLine, "%i km/h        ", windSample);
 002B 5200              mov A,[X+0]
 002D 08                push A
 002E 5201              mov A,[X+1]
 0030 08                push A
 0031 5000              mov A,>L3
 0033 08                push A
 0034 5000              mov A,<L3
 0036 08                push A
 0037 52F9              mov A,[X-7]
 0039 08                push A
 003A 52FA              mov A,[X-6]
 003C 08                push A
 003D 7C0000            xcall _csprintf
 0040 38F6              add SP,-10
 0042                   .dbline -2
 0042           L1:
 0042 38FE              add SP,-2
 0044 20                pop X
 0045                   .dbline 0 ; func end
 0045 7F                ret
 0046                   .dbsym l windSample 0 I
 0046                   .dbsym l secondLine -7 pc
 0046                   .dbsym l firstLine -5 pc
 0046                   .dbend
                        .area lit(rom, con, rel, lit)
 0000           L3:
 0000 2569206B6D2F68202020202020202000  .byte 37,'i,32,'k,'m,47,'h,32,32,32,32,32,32,32,32,0
 0010           L2:
 0010 57696E64737065656420262044697265  .byte 'W,'i,'n,'d,'s,'p,'e,'e,'d,32,38,32,'D,'i,'r,'e
 0020 00                .byte 0
